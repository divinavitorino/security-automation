# This playbook creates a user in Active Directory by filling in the basic fields (login, password and email) 
# and performing the following tasks:
#- placing it in one or more user groups
#- allocating the user to the correct OU
#- sets password to be changed on next logon
# this playbook can be used manually, run from the ansible server or inserted into a Jenkins job. 
# The following version is prepared for use with Jenkins. 

---
- name: Create and update user accounts on AD
  hosts: ad_server
  gather_facts: no
  tasks:
    - name: Create or Update Account
      microsoft.ad.user:
        name: lbarbosa
        state: present
        firstname: Luciana Souza  
        surname: Barbosa
        email: luciana.barbosa@labadventures.com
        display_name: Luciana Barbosa
        upn: lbarbosa@labinternal.com
        password: Laralara@01
        password_expired: true
        description: Created by automation
        path: OU=Sao Paulo,OU=Brasil,DC=labinternal,DC=com
        groups:
          add:
          - Corporativo
...